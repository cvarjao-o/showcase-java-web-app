metricbeat.modules:
  - module: jolokia
    metricsets: ["jmx"]
    enabled: true
    period: 10s
    hosts: ["localhost:7070"]
    namespace: "jmx"
    path: "/jolokia"
    http_method: 'GET'
    jmx.mappings:
      - mbean: 'java.lang:type=Memory'
        attributes:
         - attr: HeapMemoryUsage
           field: memory.heap
           event: jmx
         - attr: NonHeapMemoryUsage
           field: memory.other
           event: jmx
      - mbean: 'Catalina:name=*,type=ThreadPool'
        attributes:
          - attr: currentThreadsBusy
            field: busy
            event: jmx
          - attr: maxThreads
            field: max
            event: jmx
          - attr: currentThreadCount
            field: current
            event: jmx
          - attr: keepAliveCount
            field: keep_alive.total
            event: jmx
          - attr: keepAliveTimeout
            field: keep_alive.timeout.ms
            event: jmx

      - mbean: 'java.lang:type=Threading'
        attributes:
          - attr: TotalStartedThreadCount
            field: started.total
          - attr: CurrentThreadUserTime
            field: user.time.ms
          - attr: CurrentThreadCpuTime
            field: cpu.time.ms
          - attr: ThreadCount
            field: total
          - attr: PeakThreadCount
            field: peak
      - mbean: 'java.lang:type=Runtime'
        attributes:
         - attr: Uptime
           field: uptime
      - mbean: 'Catalina:name=*,type=GlobalRequestProcessor'
        attributes:
         - attr: requestCount
           field: tomcat.requests.total
         - attr: errorCount
           field: tomcat.requests.errors.total
         - attr: bytesReceived
           field: tomcat.requests.bytes.received
         - attr: bytesSent
           field: tomcat.requests.bytes.sent
#  - module: tomcat
#    metricsets: ['threading', 'cache', 'memory', 'requests']
#    period: 10s
#    hosts: ['localhost:7070']
#    path: "/jolokia/?ignoreErrors=true&canonicalNaming=false"
  
#processors:
#  - add_host_metadata: ~
#  - add_cloud_metadata: ~

output.console:
  pretty: true